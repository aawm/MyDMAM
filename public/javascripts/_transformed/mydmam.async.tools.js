/** This file is automatically generated! Do not edit. */ (function(async) { /*
 * This file is part of MyDMAM.
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * Copyright (C) hdsdi3g for hd3g.tv 2015
 * 
*/

/**
 * Wait 300 ms before show it.
 */
async.PageLoadingProgressBar = React.createClass({displayName: "PageLoadingProgressBar",
	getInitialState: function() {
		return {timer: null, show_bar: false};
	},
	componentWillMount: function() {
		this.setState({timer: setTimeout(this.onTimerDone, 300)});
	},
	onTimerDone: function() {
		this.setState({show_bar: true, timer: null});
	},
	componentWillUnmount: function() {
		if (this.state.timer) {
			clearInterval(this.state.timer);
		}
	},
	render: function() {
		if (this.state.show_bar) {
			return (React.createElement("div", {className: "progress progress-striped progress-info active"}, React.createElement("div", {className: "bar", style: {width: "100%"}})));
		} else {
			return (React.createElement("span", null));
		}
	}
});

async.AlertBox = React.createClass({displayName: "AlertBox",
	render: function() {
		var title = null;
		if (this.props.title) {
			title = (React.createElement("div", null, React.createElement("h4", null, this.props.title)));
		}
		var classes = classNames("alert");
		if (this.props.color) {
			classes = classNames("alert", this.props.color);
		}
		return (React.createElement("div", {className: classes}, title, this.props.children));
	}
});

async.AlertInfoBox = React.createClass({displayName: "AlertInfoBox",
	render: function() {
		return (React.createElement(async.AlertBox, React.__spread({color: "alert-info"},  this.props)));
	}
});

async.AlertErrorBox = React.createClass({displayName: "AlertErrorBox",
	render: function() {
		return (React.createElement(async.AlertBox, React.__spread({color: "alert-error"},  this.props)));
	}
});

async.FormControlGroup = React.createClass({displayName: "FormControlGroup",
	render: function() {
		var label = null;
		if (this.props.label) {
			label = (React.createElement("label", {className: "control-label"}, this.props.label));
		}

		return (React.createElement("div", {className: "control-group"}, 
			label, 
			React.createElement("div", {className: "controls"}, 
				this.props.children
			)
		));
	}
});

async.BtnEnableDisable = React.createClass({displayName: "BtnEnableDisable",
	propTypes: {
		simplelabel: React.PropTypes.bool.isRequired,
		enabled: React.PropTypes.bool.isRequired,
		labelenabled: React.PropTypes.string.isRequired,
		labeldisabled: React.PropTypes.string.isRequired,
		onEnable: React.PropTypes.func,
		onDisable: React.PropTypes.func,
		reference: React.PropTypes.string,
		iconcircle: React.PropTypes.bool,
	},
	getInitialState: function() {
		return {pending_changes: false};
	},
	onClickSetEnable: function() {
		if (this.state.pending_changes) {
			return;
		}
		this.setState({pending_changes: true});
		this.props.onEnable(this.props.reference);
	},
	onClickSetDisable: function() {
		if (this.state.pending_changes) {
			return;
		}
		this.setState({pending_changes: true});
		this.props.onDisable(this.props.reference);
	},
	componentWillReceiveProps: function() {
		this.setState({pending_changes: false});
	},
	render: function() {
		var class_name_icon = classNames({
			"icon-white":       !(!this.props.enabled &  this.props.iconcircle),
			"icon-stop":         this.props.enabled & !this.props.iconcircle,
			"icon-play":        !this.props.enabled & !this.props.iconcircle,
			"icon-ok-circle":    this.props.enabled &  this.props.iconcircle,
			"icon-ban-circle":  !this.props.enabled &  this.props.iconcircle,
		});

		if (this.props.simplelabel) {
			if (this.props.enabled) {
				return (React.createElement("span", null, React.createElement("strong", null, this.props.labelenabled)));
			} else {
				return (React.createElement("span", {className: "muted"}, React.createElement("strong", null, this.props.labeldisabled)));
			}
		}
		 
		if (this.props.enabled) {
			var btn_classes = classNames("btn", "btn-mini", {
				disabled: this.state.pending_changes,
				"btn-danger": !this.props.iconcircle,
				"btn-success": this.props.iconcircle,
			});
			return (React.createElement("button", {className: btn_classes, onClick: this.onClickSetDisable}, React.createElement("i", {className: class_name_icon}), " ", this.props.labelenabled));
		} else {
			var btn_classes = classNames("btn", "btn-mini", {
				disabled: this.state.pending_changes,
				"btn-success": !this.props.iconcircle,
			});
			return (React.createElement("button", {className: btn_classes, onClick: this.onClickSetEnable}, React.createElement("i", {className: class_name_icon}), " ", this.props.labeldisabled));
		}
	},
});

async.BtnDelete = React.createClass({displayName: "BtnDelete",
	propTypes: {
		label: React.PropTypes.string,
		enabled: React.PropTypes.bool.isRequired,
		onClickDelete: React.PropTypes.func.isRequired,
		reference: React.PropTypes.string,
	},
	getInitialState: function() {
		return {pending_changes: false};
	},
	onClickDelete: function() {
		if (this.state.pending_changes) {
			return;
		}
		if (!this.props.enabled) {
			return;
		}
		this.setState({pending_changes: true});
		this.props.onClickDelete(this.props.reference);
	},
	componentWillReceiveProps: function() {
		this.setState({pending_changes: false});
	},
	render: function() {
		var btn_classes = classNames("btn", "btn-mini", "btn-danger", {
			disabled: this.state.pending_changes | !this.props.enabled,
		});
		return (React.createElement("button", {className: btn_classes, onClick: this.onClickDelete}, React.createElement("i", {className: "icon-trash icon-white"}), " ", this.props.label));
	},
});

async.SimpleBtn = React.createClass({displayName: "SimpleBtn",
	propTypes: {
		enabled: React.PropTypes.bool.isRequired,
		onClick: React.PropTypes.func.isRequired,
		reference: React.PropTypes.string,
		btncolor: React.PropTypes.string,
	},
	onClick: function() {
		if (!this.props.enabled) {
			return;
		}
		this.props.onClick(this.props.reference);
	},
	render: function() {
		var btn_classes = classNames("btn", "btn-mini", this.props.btncolor, {
			disabled: !this.props.enabled,
		});
		return (React.createElement("button", {className: btn_classes, onClick: this.onClick}, this.props.children));
	},
});


async.ButtonSort = React.createClass({displayName: "ButtonSort",
	handleClick: function(e) {
		e.preventDefault();
		this.props.onChangeState(this.props.colname, this.props.order);
	},
	render: function() {
		var is_up = false;
		var is_down = false;
		var btn_active = false;

		if (this.props.order != null) {
			is_up = (this.props.order === 'asc');
			is_down = (this.props.order === 'desc');
			btn_active = true;
		}

		var btn_classes = classNames({
		    'btn': true, 'btn-mini': true, 'pull-right': true,
	    	'active': btn_active,
		});
		var icon_classes = classNames({
			'pull-right': true,
		    'icon-chevron-up': is_up,
		    'icon-chevron-down': is_down,
		    'icon-minus': ((is_up === false) & (is_down === false)),
		});

		return (
			React.createElement("button", {className: btn_classes, onClick: this.handleClick}, 
				React.createElement("i", {className: icon_classes})
			)
		);
	}
});

async.LabelBoolean = React.createClass({displayName: "LabelBoolean",
	propTypes: {
		label_true: 	React.PropTypes.string.isRequired,
		label_false: 	React.PropTypes.string.isRequired,
		value: 			React.PropTypes.bool.isRequired,
		inverse: 		React.PropTypes.bool,
	},
	render: function() {
		var value = this.props.value;
		var inverse = false;
		if (this.props.inverse) {
			inverse = true;
		}

		var label = i18n(this.props.label_false);
		if (value) {
			label = i18n(this.props.label_true);
		}

		var span_class = classNames("badge", {
			"badge-success": value == inverse,
			"badge-important": value != inverse,
		});
		var icon = classNames("icon-white", {
			"icon-remove-circle": ! value,
			"icon-ok-circle": value,
		});

		return (React.createElement("span", {className: span_class}, React.createElement("i", {className: icon}), " ", label))
	},
});

async.JsonCode = React.createClass({displayName: "JsonCode",
	propTypes: {
		i18nlabel:		React.PropTypes.string.isRequired,
		json: 			React.PropTypes.object.isRequired,
	},
	render: function() {
		var i18nlabel = (React.createElement("span", {className: "jsontitle"}, " ", i18n(this.props.i18nlabel), " "));

		return (React.createElement("div", null, 
			React.createElement("code", {className: "json", style: {marginTop: 10}}, 
				React.createElement("i", {className: "icon-indent-left"}), 
				i18nlabel, 
				JSON.stringify(this.props.json, null, " ")
			)
		));
	},
});

async.appversion = "master master";

async.makeGitHubLink = function(javaclass) {
	if (javaclass == null) {
		return null;
	}
	if ((javaclass.indexOf("hd3gtv.") != 0) & (javaclass.indexOf("controllers.") != 0)) {
		return null;
	}
	var dollar_pos = javaclass.indexOf("$");
	if (dollar_pos > -1) {
		javaclass = javaclass.substring(0, dollar_pos);
	}

	return "https://github.com/hdsdi3g/MyDMAM/blob/" + async.appversion.substring(async.appversion.lastIndexOf(" ") + 1) + "/app/" + javaclass.replace(/\./g, "/") + ".java";
}

async.JavaClassNameLink = React.createClass({displayName: "JavaClassNameLink",
	onClickLink: function(e) {
		e.stopPropagation();
	},
	render: function() {
		var javaclass = this.props.javaclass;
		if (javaclass == null) {
			return (React.createElement("strong", null, React.createElement("em", {className: "muted"}, "Void")));
		}

		var href = async.makeGitHubLink(javaclass);

		if (href == null) {
			return (React.createElement("span", null, javaclass));
		}

		var icon_style = {
			height: 14,
			lineHeight: 14,
			marginTop: 1,
			verticalAlign: "text-top",
			width: 14,
		};

		return (React.createElement("span", null, 
			React.createElement("a", {href: href, target: "_blank", onClick: this.onClickLink}, 
				React.createElement("img", {src: mydmam.urlimgs.github_favicon, style: icon_style}), 
				" ", 
				React.createElement("abbr", {title: javaclass}, 
					javaclass.substring(javaclass.lastIndexOf(".") + 1)
				)
			)
		));
	},
});

async.JavaStackTrace = React.createClass({displayName: "JavaStackTrace",
	onClickLink: function(e) {
		e.stopPropagation();
	},
	getStacktrace: function(processing_error, i) {
		var lines = [];
		lines.push(React.createElement("div", {key: i++}, processing_error["class"], ": ", processing_error.message));
		for (var pos = 0; pos < processing_error.stacktrace.length; pos++) {
			var trace = processing_error.stacktrace[pos];

			if (trace.line === -2) {
				lines.push(React.createElement("div", {key: i++}, 
					" at ", trace["class"], ".", trace.method, "(Native Method)"
				));
			} else if (trace.file) {
				var url = async.makeGitHubLink(trace["class"]);

				if (trace.line >= 0) {
					if (url) {
						lines.push(React.createElement("div", {key: i++}, 
							" at ", trace["class"], ".", trace.method, "(", React.createElement("a", {href: url + "#L" + trace.line, target: "_blank"}, trace.file, ":", trace.line), ")"
						));
					} else {
						lines.push(React.createElement("div", {key: i++}, 
							" at ", trace["class"], ".", trace.method, "(", trace.file, ":", trace.line, ")"
						));
					}
				} else {
					if (url) {
						lines.push(React.createElement("div", {key: i++}, 
							" at ", trace["class"], ".", trace.method, "(", React.createElement("a", {href: url, target: "_blank"}, trace.file), ")"
						));
					} else {
						lines.push(React.createElement("div", {key: i++}, 
							" at ", trace["class"], ".", trace.method, "(", trace.file, ")"
						));
					}
				}
			} else {
				lines.push(React.createElement("div", {key: i++}, 
					" at ", trace["class"], ".", trace.method, "(Unknown Source)"
				));
			}
		}
		
		if (processing_error.cause) {
			lines.push(React.createElement("div", {key: i++}, "Caused by:"));
			return lines.concat(broker.getStacktrace(processing_error.cause, i));
		}
		return lines;
	},
	render: function() {
		if (this.props.processing_error == null) {
			return null;
		}

		return (React.createElement("div", {className: "stacktrace", onClick: this.onClickLink}, this.getStacktrace(this.props.processing_error, 0)));
	},
});

async.SearchInputBox = React.createClass({displayName: "SearchInputBox",
	getInitialState: function() {
		return {timer: null};
	},
	onTimerDone: function() {
		this.setState({timer: null});
		this.props.onKeyPress(React.findDOMNode(this.refs.inputbox).value);
	},
	onKeyPress: function() {
		if (this.state.timer) {
			clearInterval(this.state.timer);
		}
		this.setState({timer: setTimeout(this.onTimerDone, 500)});
	},
	componentWillUnmount: function() {
		if (this.state.timer) {
			clearInterval(this.state.timer);
		}
	},
	render: function() {
		return (React.createElement("span", {style: {"fontSize" : 13}}, React.createElement("input", {
			type: "text", 
			ref: "inputbox", 
			placeholder: i18n("maingrid.search"), 
			className: "input-medium search-query", 
			style: this.props.style, 
			onKeyUp: this.onKeyPress})
		));
	}
});

async.NavTabsLink = React.createClass({displayName: "NavTabsLink",
	onClick: function(e) {
		e.preventDefault();
		this.props.onActiveChange(this.props.pos);
		$(React.findDOMNode(this.refs.tab)).blur();
	},
	render: function() {
		var icon = null;
		if (this.props.icon) {
			icon = (React.createElement("span", null, React.createElement("i", {className: this.props.icon}), " "));
		}
		var label = null;
		if (this.props.i18nlabel) {
			label = i18n(this.props.i18nlabel);
		}
		return (React.createElement("a", {href: location.hash, onClick: this.onClick, ref: "tab"}, icon, label));
	},
});

async.NavTabs = React.createClass({displayName: "NavTabs",
	onActiveChange: function(new_pos) {
		if (new_pos < 0) {
			return;
		}
		if (new_pos > this.props.content.length) {
			return;
		}
		this.props.onChange(new_pos);
	},
	render: function() {
		if (this.props.content == null) {
			return (React.createElement("span", null));
		}
		if (this.props.content.length === 0) {
			return (React.createElement("span", null));
		}

		var content = [];
		for (var pos in this.props.content) {
			var item = this.props.content[pos];
			var li_class = classNames({
				"active": 		(this.props.active == pos),
				"pull-right": 	item.pullright,
			});
			content.push(React.createElement("li", {className: li_class, key: pos}, 
				React.createElement(async.NavTabsLink, {pos: pos, i18nlabel: item.i18nlabel, icon: item.icon, onActiveChange: this.onActiveChange})
			));
		}

		return (React.createElement("ul", {className: "nav nav-tabs"}, 
			content
		));
	},
});

async.PageHeaderTitle = React.createClass({displayName: "PageHeaderTitle",
	getInitialState: function() {
		return {active_tab: 0};
	},
	componentDidMount: function() {
		this.setDocumentTitle();
	},
	componentDidUpdate: function(dd) {
		this.setDocumentTitle();
	},
	setDocumentTitle: function() {
		var tab_name = "";

		if (this.props.tabs) {
			tab_name = this.props.tabs[this.state.active_tab].i18nlabel;
			if (tab_name) {
				tab_name = i18n(tab_name) + " :: ";
			}
		}

		var new_title = null;
		if (this.props.title) {
			new_title = tab_name + this.props.title + " :: " + i18n("site.name");
		} else {
			new_title = tab_name + i18n("site.name");
		}
		if (document.title != new_title) {
			document.title = new_title
		}
	},
	componentWillUnmount: function() {
		document.title = i18n("site.name");
	},
	onChangeTab: function(new_pos){
		this.setState({active_tab: new_pos});
	},
	render: function() {
		var p_lead = null;
		if (this.props.title) {
			p_lead = (React.createElement("p", {className: "lead"}, this.props.title));
		}

		var main_class_name = classNames("container");
		if (this.props.fluid) {
			main_class_name = classNames("container-fluid");
		}

		var tabs_content = null;
		var selected_content = null;
		if (this.props.tabs) {
			var navtabscontent = this.props.tabs;
			tabs_content = (React.createElement(mydmam.async.NavTabs, {content: navtabscontent, onChange: this.onChangeTab, active: this.state.active_tab}));
			selected_content = this.props.tabs[this.state.active_tab].content;
		}

		return (React.createElement("div", {className: main_class_name}, 
			p_lead, 
			tabs_content, 
			React.createElement("div", null, selected_content), 
			React.createElement("div", null, this.props.children)
		));
	}
});

async.HeaderTab = React.createClass({displayName: "HeaderTab",
	onClick: function(e) {
		//e.preventDefault();
		//this.props.onActiveChange(this.props.pos);
		$(React.findDOMNode(this.refs.tab)).blur();
	},
	render: function(){
		var li_class = classNames({
			"active": this.props.href == location.hash
		});

		return (React.createElement("li", {className: li_class}, 
			React.createElement("a", {href: this.props.href, onClick: this.onClick, ref: "tab"}, i18n(this.props.i18nlabel))
		));
	},
});

})(window.mydmam.async);
// Generated by hd3gtv.mydmam.web.JSProcessor for the module internal
// Source hash: 16efb74d6f709408448425bd15d22dcf
