(function(a){a.SearchResultPage=React.createClass({displayName:"SearchResultPage",handleSearchFormSubmit:function(b){if(!b.q){return;
}window.location=a.makeURLsearch(b.q,1);},handlePaginationLinkTargeter:function(b){return a.makeURLsearch(this.state.results.q,b);
},getInitialState:function(){return{results:this.props.results,stat:{},externalpos:{}};
},componentDidMount:function(){var f=this.state.results.results;var c=[];for(var e=0;
e<f.length;e++){if(f[e].index==="pathindex"){c.push(f[e].key);}}if(c.length>0){var d={pathelementskeys:c,scopes_element:[mydmam.stat.SCOPE_MTD_SUMMARY],scopes_subelements:[],page_from:0,page_size:500,search:JSON.stringify(""),sort:[]};
mydmam.async.request("stat","cache",d,function(h){this.setState({stat:h});}.bind(this));
}var g=[];for(var e=0;e<f.length;e++){if(mydmam.module.f.wantToHaveResolvedExternalPositions(f[e].index,f[e].content.directory,f[e].content.storagename)){g.push(f[e].key);
}}var b=function(h){this.setState({externalpos:h});}.bind(this);mydmam.async.pathindex.resolveExternalPosition(g,b);
},render:function(){return(React.createElement("div",null,React.createElement(a.SearchForm,{results:this.state.results,onSearchFormSubmit:this.handleSearchFormSubmit,onSearchFormChange:this.handleSearchFormChange}),React.createElement(a.SearchResultsHeader,{results:this.state.results}),React.createElement(a.SearchResults,{results:this.state.results,stat:this.state.stat,externalpos:this.state.externalpos}),React.createElement(mydmam.async.pagination.reactBlock,{pagecount:this.state.results.pagecount,currentpage:this.state.results.from,onlinkTargeter:this.handlePaginationLinkTargeter})));
}});})(window.mydmam.async.search);