(function(a){a.contextToString=function(c,f){var d="";var e=c.classname.substring(c.classname.lastIndexOf(".")+1,c.classname.length);
d=d+'<abbr title="'+c.classname+'">'+e+".class</abbr>";if(f){if(jQuery.isEmptyObject(c.content)===false){d=d+' &bull; <code class="json"><i class="icon-indent-left"></i>';
d=d+JSON.stringify(c.content,null," ");d=d+"</code>";}else{d=d+"<br>";}}else{d=d+"<br>";
}if(c.neededstorages){d=d+i18n("manager.jobcreator.context.neededindexedstoragesnames")+" ";
for(var b=0;b<c.neededstorages.length;b++){d=d+c.neededstorages[b];if(b+1<c.neededstorages.length){d=d+", ";
}}}return d;};})(window.mydmam.manager.jobcreator);(function(a){a.prepareGenericTable=function(b,g,f,d,k){var c=function(q,o){var r="";
r=r+"<td>";if(q.enabled===false){r=r+'<span class="badge badge-important">'+i18n("manager.jobcreator.disabled")+"</span> ";
}r=r+'<abbr title="'+i18n("manager.jobcreator.createdby")+" "+q.creator+'">'+q.long_name+"</abbr><br />";
r=r+"<small>"+q.vendor_name+"</small>";r=r+"</td>";if(d){r=r+d(q,o);}r=r+"<td><small>";
for(var p=0;p<q.declarations.length;p++){var t=q.declarations[p];r=r+'<ul style="margin-left: 0px; margin-bottom: 0px;">';
r=r+"<li>"+t.job_name+"</li>";r=r+"<li><ul>";for(var s=0;s<t.contexts.length;s++){r=r+"<li>"+a.contextToString(t.contexts[s],true)+"</li>";
}r=r+"</ul></li>";r=r+"</ul>";}r=r+"</small></td>";if(mydmam.manager.hasInstanceAction()){r=r+"<td>";
r=r+'<div class="btn-group">';if(q.enabled){r=r+'<button class="btn btn-mini btnmgraction btn-danger" ';
r=r+'data-target_class_name="'+k+'" ';r=r+'data-order_key="activity" ';r=r+'data-order_value="disable" ';
r=r+'data-target_reference_key="'+q.reference_key+'" ';r=r+'><i class="icon-stop icon-white"></i> '+i18n("manager.jobcreator.action.disable");
r=r+"</button>";}else{r=r+'<button class="btn btn-mini btnmgraction btn-success" ';
r=r+'data-target_class_name="'+k+'" ';r=r+'data-order_key="activity" ';r=r+'data-order_value="enable" ';
r=r+'data-target_reference_key="'+q.reference_key+'" ';r=r+'><i class="icon-play icon-white"></i> '+i18n("manager.jobcreator.action.enable");
r=r+"</button>";}r=r+'<button class="btn btn-mini btnmgraction btn-primary" ';r=r+'data-target_class_name="'+k+'" ';
r=r+'data-order_key="activity" ';r=r+'data-order_value="createjobs" ';r=r+'data-target_reference_key="'+q.reference_key+'" ';
r=r+'><i class="icon-play-circle icon-white"></i> '+i18n("manager.jobcreator.action.createjobs");
r=r+"</button>";r=r+"</div>";r=r+"</td>";}return r;};var l=function(o){var s=o[g];
if(!s){return null;}if(s.length===0){return null;}var q="";for(var r=0;r<s.length;
r++){var p=s[r];q=q+"<tr>";q=q+"<td>";q=q+mydmam.manager.prepareInstanceNameCell(o,p.reference_key);
q=q+"</td>";q=q+c(p,o);q=q+"</tr>";}return q;};var h="";var e=true;h=h+'<table class="table table-striped table-bordered table-hover table-condensed setdatatable">';
h=h+"<thead>";h=h+"<th>"+i18n("manager.jobcreator.th.instance")+"</th>";h=h+"<th>"+i18n("manager.jobcreator.th.name")+"</th>";
if(f){for(var n=0;n<f.length;n++){h=h+"<th>"+f[n]+"</th>";}}h=h+"<th>"+i18n("manager.jobcreator.th.declarations")+"</th>";
if(mydmam.manager.hasInstanceAction()){h=h+"<th>"+i18n("manager.jobcreator.th.actions")+"</th>";
}h=h+"</thead>";h=h+"<tbody>";for(var j=0;j<b.length;j++){var m=b[j];var i=l(m);if(i!=null){h=h+i;
e=false;}}h=h+"</tbody>";h=h+"</table>";if(e){return'<div class="alert alert-info"><strong>'+i18n("manager.workers.empty")+"</strong></div>";
}else{return h;}};})(window.mydmam.manager.jobcreator);(function(a){a.prepareCyclic=function(d){var c="CyclicJobCreator";
var b=function(g,e){var h="<td>";if(g.enabled){h=h+'<span class="label">';h=h+mydmam.format.timeAgo(g.period+new Date().getTime(),"manager.jobcreator.cyclic.periodvalue","manager.jobcreator.cyclic.periodvalue");
h=h+"</span>";h=h+'<span class="pull-right">';h=h+'<div class="btn-group">';var f=function(l,m,k,j,i){h=h+'<button class="btn btn-mini btnmgraction" ';
h=h+'data-target_class_name="'+c+'" ';h=h+'data-order_key="'+l+'" ';h=h+'data-order_value="'+m+'" ';
h=h+'data-target_reference_key="'+g.reference_key+'" ';h=h+'><i class="'+k+'"></i> ';
if(j){h=h+'<i class="'+j+'"></i> ';}if(i){h=h+i18n(i);}h=h+"</button>";};f("setperiod",Math.round(g.period/2),"icon-repeat",null,"/2");
f("setperiod",g.period*2,"icon-repeat",null,"x2");f("setnextdate",g.next_date_to_create_jobs+g.period,"icon-time","icon-fast-forward",null);
h=h+"</div>";h=h+"</span>";if(g.next_date_to_create_jobs){if(g.only_off_hours){if(e.is_off_hours){h=h+'<br><span class="label">'+mydmam.format.timeAgo(g.next_date_to_create_jobs,"manager.jobcreator.cyclic.nextdate","manager.jobcreator.cyclic.nextdate")+"</span>";
}else{h=h+'<br><span class="label">'+i18n("manager.jobcreator.cyclic.nonextdate")+"</span>";
}}else{h=h+'<br><span class="label">'+mydmam.format.timeAgo(g.next_date_to_create_jobs,"manager.jobcreator.cyclic.nextdate","manager.jobcreator.cyclic.nextdate")+"</span>";
}}else{h=h+'<br><span class="label">'+i18n("manager.jobcreator.cyclic.nonextdate")+"</span>";
}if(g.only_off_hours){h=h+'<br><span class="label label-info">'+i18n("manager.jobcreator.cyclic.onlyonoffhours")+"</span>";
if(g.is_off_hours){h=h+'<span class="label label-info">'+i18n("manager.jobcreator.cyclic.actuallyonoffhours")+"</span>";
}}}h=h+"</td>";return h;};return a.prepareGenericTable(d,"declared_cyclics",[i18n("manager.jobcreator.cyclic.period")],b,c);
};})(window.mydmam.manager.jobcreator);(function(a){a.prepareTriggers=function(c){var b=function(e,d){var f="<td>";
f=f+a.contextToString(e.context_hook,false);f=f+"</td>";return f;};return a.prepareGenericTable(c,"declared_triggers",[i18n("manager.jobcreator.trigger.hook")],b,"TriggerJobCreator");
};})(window.mydmam.manager.jobcreator);