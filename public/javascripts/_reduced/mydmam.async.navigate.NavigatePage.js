(function(a){a.Home=React.createClass({displayName:"Home",componentDidMount:function(){if(window.list_external_positions_storages==null){mydmam.async.request("stat","listexternalpositionsstorages",null,function(b){window.list_external_positions_storages=b;
});}this.setDocumentTitle();},componentDidUpdate:function(b){this.setDocumentTitle();
},setDocumentTitle:function(b){var c=i18n("application.navigate")+" :: "+i18n("site.name");
if(b){c=b+" :: "+c;}if(document.title!=c){document.title=c;}},componentWillUnmount:function(){document.title=i18n("site.name");
},render:function(){var d=null;if(this.props.params.storage){var c=this.props.params.storage;
if(c.endsWith(":")==false){c=c+":";}for(var b=1;b<21;b++){if(this.props.params["p"+b]){c=c+"/"+this.props.params["p"+b];
}}if(c.endsWith(":")){c=c+"/";}d=React.createElement(a.NavigatePage,{pathindex_destination:c,setDocumentTitle:this.setDocumentTitle});
}else{d=React.createElement(a.NavigatePage,{pathindex_destination:"",setDocumentTitle:this.setDocumentTitle});
}return(React.createElement("div",{className:"container-fluid"},d));}});mydmam.routes.push("navigate-root","navigate",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir0","navigate/:storage",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir1","navigate/:storage/:p1",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir2","navigate/:storage/:p1/:p2",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir3","navigate/:storage/:p1/:p2/:p3",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir4","navigate/:storage/:p1/:p2/:p3/:p4",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir5","navigate/:storage/:p1/:p2/:p3/:p4/:p5",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir6","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir7","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir8","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir9","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir10","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir11","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir12","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir13","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir14","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir15","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/:p15",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir16","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/:p15/:p16",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir17","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/:p15/:p16/:p17",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir18","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/:p15/:p16/:p17/:p18",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir19","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/:p15/:p16/:p17/:p18/:p19",a.Home,[{name:"stat",verb:"cache"}]);
mydmam.routes.push("navigate-subdir20","navigate/:storage/:p1/:p2/:p3/:p4/:p5/:p6/:p7/:p8/:p9/:p10/:p11/:p12/:p13/:p14/:p15/:p16/:p17/:p18/:p19/:p20",a.Home,[{name:"stat",verb:"cache"}]);
a.NavigatePage=React.createClass({displayName:"NavigatePage",getInitialState:function(){return{stat:{},pathindex:"",default_page_size:20,sort_order:[],externalpos:{}};
},navigateTo:function(f,i,d,c){var e=mydmam.stat;var h=md5(f);if(c==null){c=this.state.sort_order;
}var b="";if(this.state.inputboxsearch){if(f!==this.state.pathindex){this.state.inputboxsearch.value="";
}b=this.state.inputboxsearch.value;}b=JSON.stringify(b);var g={pathelementskeys:[h],page_from:i,page_size:d,scopes_element:[e.SCOPE_DIRLIST,e.SCOPE_PATHINFO,e.SCOPE_MTD_SUMMARY,e.SCOPE_COUNT_ITEMS],scopes_subelements:[e.SCOPE_MTD_SUMMARY,e.SCOPE_COUNT_ITEMS],search:b,sort:c};
document.body.style.cursor="wait";mydmam.async.request("stat","cache",g,function(o){document.body.style.cursor="default";
if(o[h]){this.setState({stat:o,pathindex:f,default_page_size:d,sort_order:c});var q=[];
for(var m in o){var n=o[m];if(!n.reference){continue;}if(!n.reference){continue;}if(mydmam.module.f.wantToHaveResolvedExternalPositions("pathindex",n.reference.directory,n.reference.storagename)){q.push(m);
}if(!n.items){continue;}for(var l in n.items){var k=n.items[l];if(!k.reference){continue;
}if(mydmam.module.f.wantToHaveResolvedExternalPositions("pathindex",k.reference.directory,k.reference.storagename)){q.push(l);
}}}var j=function(r){this.setState({externalpos:r});}.bind(this);mydmam.async.pathindex.resolveExternalPosition(q,j);
}else{if(i>0){this.navigateTo(f,0,d);}return;}var p=this.state.pathindex;p=p.substring(p.lastIndexOf("/")+1,p.length);
if(p==""){p=this.state.pathindex.substring(0,this.state.pathindex.length-2);}this.props.setDocumentTitle(p);
}.bind(this));},componentDidMount:function(){this.navigateTo(this.props.pathindex_destination,0,this.state.default_page_size);
},componentWillUpdate:function(b,c){if(this.props.pathindex_destination!=b.pathindex_destination){this.navigateTo(b.pathindex_destination,0,this.state.default_page_size);
}},handlePaginationSwitchPage:function(c,b){if(b){this.navigateTo(this.state.pathindex,0,this.state.default_page_size*2);
}else{this.navigateTo(this.state.pathindex,c-1,this.state.default_page_size);}},handlechangeOrderSort:function(d,b){var c=[];
if(b!=null){var b=b.toUpperCase();if(d==="size"){c=[{colname:"directory",order:"ASC"},{colname:"size",order:b}];
}else{if(d==="date"){c=[{colname:"date",order:b}];}else{c=[{colname:"sortedfilename",order:b}];
}}}this.navigateTo(this.state.pathindex,0,this.state.default_page_size,c);},handleChangeSearchBox:function(c){if(!this.state.inputboxsearch){this.setState({inputboxsearch:c});
}var b=this.state.stat[md5(this.state.pathindex)];if(!b){return;}if(b.reference.directory){this.navigateTo(this.state.pathindex,0,this.state.default_page_size,null);
}},render:function(){var f=this.state.stat[md5(this.state.pathindex)];if(!f){return(React.createElement("div",null));
}var h=0;if(f.items){for(var i in f.items){var b=f.items[i];if(b.reference){if(b.reference.dateindex){h=b.reference.dateindex;
break;}}}}var g=null;var j=null;if(f.reference){g=f.reference.storagename;j=f.reference.path;
}var e=null;var d=null;if(f.search_return_nothing){e=(React.createElement(a.NoResultsSearch,null));
}else{if(f.items_total){d=(React.createElement(mydmam.async.pagination.reactBlock,{pagecount:Math.ceil(f.items_total/f.items_page_size),currentpage:f.items_page_from+1,onClickButton:this.handlePaginationSwitchPage}));
}}var c=false;if(this.state.inputboxsearch){c=this.state.inputboxsearch.value!="";
}return(React.createElement("div",null,React.createElement(a.BreadCrumb,{storagename:g,path:j}),React.createElement(a.HeaderItem,{stat:f,first_item_dateindex:h,pathindexkey:md5(this.state.pathindex),is_in_search:c,externalpos:this.state.externalpos}),React.createElement(mydmam.async.pathindex.reactMetadataFull,{reference:f.reference,mtdsummary:f.mtdsummary}),React.createElement(a.NavigateTable,{stat:f,changeOrderSort:this.handlechangeOrderSort,externalpos:this.state.externalpos}),d,e,React.createElement(a.SearchBox,{changeStateInputbox:this.handleChangeSearchBox})));
}});})(window.mydmam.async.navigate);