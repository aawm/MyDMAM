(function(a){a.Header=React.createClass({displayName:"Header",getInitialState:function(){return{summaries:{},interval:null};
},componentWillMount:function(){this.refresh();mydmam.async.request("instances","appversion",null,function(b){mydmam.async.appversion=b;
}.bind(this));},refresh:function(){mydmam.async.request("instances","allsummaries",null,function(b){this.setState({summaries:b});
}.bind(this));},componentDidMount:function(){this.setState({interval:setInterval(this.refresh,10000)});
},componentWillUnmount:function(){if(this.state.interval){clearInterval(this.state.interval);
}},truncateDb:function(b){b.preventDefault();mydmam.async.request("instances","truncate",null,function(){window.location.reload();
}.bind(this));},render:function(){if(this.state.summaries==null){b=(React.createElement(mydmam.async.PageLoadingProgressBar,null));
}var b=null;if(location.hash.indexOf("#manager/summary")==0){b=(React.createElement(a.Summaries,{summaries:this.state.summaries}));
}else{if(location.hash.indexOf("#manager/classpath")==0){b=(React.createElement(a.Classpaths,{summaries:this.state.summaries}));
}else{if(location.hash.indexOf("#manager/threads")==0){b=(React.createElement(a.Threads,{summaries:this.state.summaries}));
}else{if(location.hash.indexOf("#manager/items")==0){b=(React.createElement(a.Items,{summaries:this.state.summaries}));
}else{if(location.hash.indexOf("#manager/perfstats")==0){b=(React.createElement(a.Perfstats,{summaries:this.state.summaries}));
}else{if(location.hash.indexOf("#manager/lastjobs")==0){b=(React.createElement(a.Lastjobs,null));
}else{if(location.hash.indexOf("#manager/pendingactions")==0){b=(React.createElement(a.PendingActions,null));
}}}}}}}return(React.createElement(mydmam.async.PageHeaderTitle,{title:i18n("manager.pagename"),fluid:"true"},React.createElement("ul",{className:"nav nav-tabs"},React.createElement(a.HeaderTab,{href:"#manager/summary",i18nlabel:"manager.summaries"}),React.createElement(a.HeaderTab,{href:"#manager/items",i18nlabel:"manager.items"}),React.createElement(a.HeaderTab,{href:"#manager/pendingactions",i18nlabel:"manager.pendingactions"}),React.createElement(a.HeaderTab,{href:"#manager/lastjobs",i18nlabel:"manager.lastjobs"}),React.createElement(a.HeaderTab,{href:"#manager/threads",i18nlabel:"manager.threads"}),React.createElement(a.HeaderTab,{href:"#manager/perfstats",i18nlabel:"manager.perfstats"}),React.createElement(a.HeaderTab,{href:"#manager/classpath",i18nlabel:"manager.classpath"}),React.createElement("li",{className:"pull-right"},React.createElement("a",{href:location.hash,onClick:this.truncateDb},i18n("manager.truncate")))),b));
}});mydmam.routes.push("manager-Summaries","manager/summary",a.Header,[{name:"instances",verb:"allsummaries"}]);
mydmam.routes.push("manager-Classpath","manager/classpath",a.Header,[{name:"instances",verb:"allclasspaths"},{name:"instances",verb:"allsummaries"}]);
mydmam.routes.push("manager-Lastjobs","manager/lastjobs",a.Header,[{name:"instances",verb:"alldonejobs"},{name:"instances",verb:"allsummaries"}]);
mydmam.routes.push("manager-Threads","manager/threads",a.Header,[{name:"instances",verb:"allthreads"},{name:"instances",verb:"allsummaries"}]);
mydmam.routes.push("manager-Items","manager/items",a.Header,[{name:"instances",verb:"allitems"},{name:"instances",verb:"allsummaries"}]);
mydmam.routes.push("manager-Perfstats","manager/perfstats",a.Header,[{name:"instances",verb:"allperfstats"}]);
mydmam.routes.push("manager-PendingActions","manager/pendingactions",a.Header,[{name:"instances",verb:"allpendingactions"}]);
a.HeaderTab=React.createClass({displayName:"HeaderTab",onClick:function(b){$(React.findDOMNode(this.refs.tab)).blur();
},render:function(){var b=classNames({active:this.props.href==location.hash});return(React.createElement("li",{className:b},React.createElement("a",{href:this.props.href,onClick:this.onClick,ref:"tab"},i18n(this.props.i18nlabel))));
}});a.InstancesNavListElement=React.createClass({displayName:"InstancesNavListElement",onClick:function(b){b.preventDefault();
this.props.onSelect(this.props.reference);$(React.findDOMNode(this.refs.tab)).blur();
},render:function(){return(React.createElement("a",{href:location.href,ref:"tab",onClick:this.onClick},this.props.children));
}});a.canCreateInstanceAction=function(){return mydmam.async.isAvaliable("instances","instanceaction");
};a.createInstanceAction=function(d,b,e,f){if(a.canCreateInstanceAction()==false){console.err("Can't create instance action, missing controller instanceaction",d,b,e);
return;}var c={target_class_name:d,target_reference_key:b,json_order:e};mydmam.async.request("instances","instanceaction",c,f);
};})(window.mydmam.async.manager);