(function(b){var a=React.createClass({displayName:"QualityTabs",handleClickSwitchSize:function(c){c.preventDefault();
this.props.onSwitchSize(!this.props.isbigsize);},handleClickSwitchQuality:function(c){c.preventDefault();
this.props.onChangeQuality($(c.currentTarget).data("qualid"));},render:function(){var d="icon-resize-full";
if(this.props.isbigsize){d="icon-resize-small";}var c=this.props.medias;var h=this.props.selectedquality;
var e=[];for(var g=0;g<c.length;g++){var f=classNames({active:(g===h)});e.push(React.createElement("li",{key:g,className:f},React.createElement("a",{href:c[g].url,style:{outline:"none"},onClick:this.handleClickSwitchQuality,"data-qualid":g},c[g].label)));
}e.push(React.createElement("li",{key:"switchsize"},React.createElement("a",{href:"",style:{outline:"none"},onClick:this.handleClickSwitchSize},React.createElement("i",{className:d}))));
return(React.createElement("ul",{className:"nav nav-tabs"},e));}});b.Video=React.createClass({displayName:"Video",getInitialState:function(){return{selectedquality:0,medias:[],isbigsize:false,transport:null,currentTime:null,duration:null};
},componentDidMount:function(){var g=this.props.master_as_preview_url;var d=this.props.file_hash;
var e=this.props.mtdsummary.previews;var c=[];if(g){var f={};f.url=g;f.label="Original";
c.push(f);}if(e){if(e.video_hd_pvw){var f={};f.url=b.getFileURL(d,e.video_hd_pvw.type,e.video_hd_pvw.file);
f.label="HD";c.push(f);}if(e.video_sd_pvw){var f={};f.url=b.getFileURL(d,e.video_sd_pvw.type,e.video_sd_pvw.file);
f.label="SQ";c.push(f);}if(e.video_lq_pvw){var f={};f.url=b.getFileURL(d,e.video_lq_pvw.type,e.video_lq_pvw.file);
f.label="LQ";c.push(f);}}this.setState({medias:c});},handleChangeQuality:function(c){this.setState({selectedquality:c,transport:{macro:"RELOAD_PLAY"}});
},handleSwitchSize:function(c){this.setState({isbigsize:c});},transportStatusChange:function(d,e,c){this.setState({currentTime:d,duration:e,transport:null});
},goToNewTime:function(c){this.setState({transport:{gototime:c}});},render:function(){var c=this.props.file_hash;
var i=this.props.mtdsummary.previews;if(this.state.medias.length===0){return null;
}var e=this.state.medias[this.state.selectedquality].url;var l=b.chooseTheCorrectImageURL(c,i);
var g=640;var m=360;var j=null;var d=this.state.isbigsize;if(d){g=null;m=null;j="container";
}var k=null;if(b.hasAudioGraphicDeepAnalyst(i)){k=this.transportStatusChange;}var f=(React.createElement(b.Mediaplayer,{transport:this.state.transport,transport_status:k,className:j,width:g,height:m,poster:l,cantloadingplayerexcuse:i18n("browser.cantloadingplayer"),source_url:e}));
var h=null;if(this.state.medias.length>1){h=(React.createElement("div",{className:"tabbable tabs-below"},React.createElement("div",{className:"tab-content"},f),React.createElement(a,{isbigsize:d,medias:this.state.medias,selectedquality:this.state.selectedquality,onChangeQuality:this.handleChangeQuality,onSwitchSize:this.handleSwitchSize})));
}else{h=f;}return(React.createElement("div",{style:{marginBottom:"1em"}},h,React.createElement(b.AudioGraphicDeepAnalyst,{previews:i,file_hash:c,currentTime:this.state.currentTime,duration:this.state.duration,goToNewTime:this.goToNewTime})));
}});})(window.mydmam.async.pathindex.metadatas);