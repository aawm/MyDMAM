(function(a){a.Items=React.createClass({displayName:"Items",getInitialState:function(){return{items:{},interval:null,selected_instances:[],selected_item_classes:[]};
},componentWillMount:function(){this.refresh(true);},refresh:function(b){mydmam.async.request("instances","allitems",null,function(c){var d=this.state.selected_instances;
if(b){d=[];for(var e in c){d.push(e);}selected_item_classes=this.getAllClassesNames(c);
}this.setState({items:c,selected_instances:d,selected_item_classes:selected_item_classes});
}.bind(this));},componentDidMount:function(){},componentWillUnmount:function(){if(this.state.interval){clearInterval(this.state.interval);
}},onSelectInstance:function(e,d){if(e=="_all"){var b=[];if(d){for(var c in this.state.items){b.push(c);
}}this.setState({selected_instances:b});return;}var f=this.state.selected_instances.slice();
if(f.indexOf(e)==-1&&d){f.push(e);this.setState({selected_instances:f});}else{if(f.indexOf(e)>-1&&(d==false)){f.splice(f.indexOf(e),1);
this.setState({selected_instances:f});}}},onSelectItemClasses:function(c,d){if(c=="_all"){var b=[];
if(d){b=this.getAllClassesNames();}this.setState({selected_item_classes:b});return;
}var e=this.state.selected_item_classes.slice();if(e.indexOf(c)==-1&&d){e.push(c);
this.setState({selected_item_classes:e});}else{if(e.indexOf(c)>-1&&(d==false)){e.splice(e.indexOf(c),1);
this.setState({selected_item_classes:e});}}},getAllClassesNames:function(g){if(g==null){g=this.state.items;
}var c=[];for(var f in g){var b=g[f];for(var e in b){var d=b[e]["class"];if(c.indexOf(d)==-1){c.push(d);
}}}return c;},onGotoTheTop:function(b){b.preventDefault();$("html, body").scrollTop(0);
},render:function(){var c=[];for(var f in this.state.items){var i=this.state.items[f];
var h=this.props.summaries[f];var l=this.state.selected_instances.indexOf(f)>-1;var k=f;
if(h!=null){k=(React.createElement("span",null,h.instance_name," ",React.createElement("small",null,"(",h.app_name,")")));
}c.push(React.createElement(a.SelectNavItemInstance,{key:f,onClick:this.onSelectInstance,reference:f,checked:l},k));
}if(c.length>1){var l=this.state.selected_instances.length==c.length;c.splice(0,0,(React.createElement(a.SelectNavItemInstance,{key:"_all",onClick:this.onSelectInstance,reference:"_all",checked:l},"ALL")));
}var d=[];var e=this.getAllClassesNames();for(var j in e){var b=e[j];var l=this.state.selected_item_classes.indexOf(b)>-1;
d.push(React.createElement(a.SelectNavItemInstance,{key:j,onClick:this.onSelectItemClasses,reference:b,checked:l},b));
}if(d.length>1){var l=this.state.selected_item_classes.length==d.length;d.splice(0,0,(React.createElement(a.SelectNavItemInstance,{key:"_all",onClick:this.onSelectItemClasses,reference:"_all",checked:l},"ALL")));
}var o=[];for(var f in this.state.items){if(this.state.selected_instances.indexOf(f)==-1){continue;
}var i=this.state.items[f];var h=this.props.summaries[f];if(h!=null){o.push(React.createElement("h3",{key:f+"-title",style:{marginBottom:6}},h.instance_name," ",React.createElement("small",null,"• ",h.app_name," • ",h.pid,"@",h.host_name)));
}else{o.push(React.createElement("h3",{key:f+"-title",style:{marginBottom:6}},f));
}for(var g in i){var n=i[g];var m=n["class"];if(this.state.selected_item_classes.indexOf(m)==-1){continue;
}var p=mydmam.module.f.managerInstancesItems(n);if(p==null){p=(React.createElement("div",null,React.createElement("code",{className:"json",style:{marginTop:10}},React.createElement("i",{className:"icon-indent-left"}),React.createElement("span",{className:"jsontitle"}," ",n["class"]," "),JSON.stringify(n.content,null," "))));
}o.push(React.createElement("div",{key:md5(f+" "+g),style:{marginBottom:26,marginLeft:10}},React.createElement("div",{className:"pull-right"},mydmam.async.broker.displayKey(n.key,true)),React.createElement("h4",null,React.createElement("a",{href:location.hash,onClick:this.onGotoTheTop},React.createElement("i",{className:" icon-arrow-up",style:{marginRight:5,marginTop:5}})),m),React.createElement("div",{className:"instance-item-block"},p)));
}o.push(React.createElement("hr",{key:f+"-hr",style:{marginBottom:10}}));}return(React.createElement("div",{className:"row-fluid"},React.createElement("div",{className:"span3"},React.createElement("div",{className:"well",style:{padding:8}},c,React.createElement("hr",null),d)),React.createElement("div",{className:"span9",style:{marginLeft:15}},o)));
}});a.SelectNavItemInstance=React.createClass({displayName:"SelectNavItemInstance",getInitialState:function(){return{checked:this.props.checked};
},componentWillReceiveProps:function(b){this.setState({checked:b.checked});},onClick:function(b){b.preventDefault();
this.props.onClick(this.props.reference,!this.state.checked);this.setState({checked:!this.state.checked});
},render:function(){return(React.createElement("div",null,React.createElement("label",{className:"checkbox",onClick:this.onClick},React.createElement("input",{type:"checkbox",ref:"cb",checked:this.state.checked,onChange:this.onClick})," ",this.props.children)));
}});mydmam.module.register("AppManager",{managerInstancesItems:function(b){if(b["class"]!="AppManager"){return null;
}return(React.createElement("div",null,React.createElement(mydmam.async.LabelBoolean,{label_true:i18n("manager.items.AppManager.broker.on"),label_false:i18n("manager.items.AppManager.broker.off"),value:b.content.brokeralive,inverse:true})," ",React.createElement(mydmam.async.LabelBoolean,{label_true:i18n("manager.items.AppManager.inoffhours"),label_false:i18n("manager.items.AppManager.innormalhours"),value:b.content.is_off_hours})," ",React.createElement(mydmam.async.pathindex.reactDate,{date:b.content.next_updater_refresh_date,i18nlabel:i18n("manager.items.AppManager.next_updater_refresh_date"),style:{marginLeft:0}})));
}});mydmam.module.register("CyclicJobCreator",{managerInstancesItems:function(e){if(e["class"]!="CyclicJobCreator"){return null;
}var d=e.content;var g=[];for(var i in d.declarations){var h=d.declarations[i];var b=[];
for(var f in h.contexts){var c=h.contexts[f];b.push(React.createElement("div",{key:f,style:{marginLeft:10}},mydmam.async.broker.displayContext(c)));
}g.push(React.createElement("div",{key:i,style:{marginLeft:12}},React.createElement("strong",null,"• ",h.job_name),React.createElement("br",null),b));
}return(React.createElement("div",null,React.createElement("strong",null,d.long_name," :: ",d.vendor_name),React.createElement("br",null),React.createElement(mydmam.async.LabelBoolean,{label_true:i18n("manager.items.CyclicJobCreator.enabled"),label_false:i18n("manager.items.CyclicJobCreator.disabled"),value:d.enabled,inverse:true})," ",React.createElement(mydmam.async.pathindex.reactDate,{date:d.next_date_to_create_jobs,i18nlabel:i18n("manager.items.CyclicJobCreator.next_date_to_create_jobs"),style:{marginLeft:0}})," ",React.createElement(mydmam.async.LabelBoolean,{label_true:i18n("manager.items.CyclicJobCreator.onlyoff"),label_false:i18n("manager.items.CyclicJobCreator.norestricted"),value:d.only_off_hours})," ",React.createElement("br",null),i18n("manager.items.CyclicJobCreator.period",d.period/1000),React.createElement("br",null),i18n("manager.items.CyclicJobCreator.creator")," ",React.createElement(mydmam.async.JavaClassNameLink,{javaclass:d.creator}),React.createElement("div",{style:{marginTop:16}},React.createElement("i",{className:"icon-th-list"})," ",i18n("manager.items.CyclicJobCreator.declarations"),React.createElement("br",null),g)));
}});})(window.mydmam.async.manager);