*{
 * This file is part of MyDMAM.
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * Copyright (C) hdsdi3g for hd3g.tv 2014
 * 
}*
#{extends 'ACL/grid.html' /}

<p>
	<a href="@{ACL.adduser()}" class="btn btn-success"><i class="icon-plus icon-white"></i> &{'acl.add'}</a>
</p>

<table class="table table-striped table-hover table-condensed elementlist">
    <thead>
        <tr>
            <th>Nom</th>
            <th>Login</th>
            <th>Groupe</th>
            <th>Role du groupe</th>
            <th>Source</th>
            <th>
            	<input type="checkbox" id="btn-toogle-desactivate" ckecked="checked" style="margin-left:39px;" />
            </th>
		</tr>
    </thead>
    <tbody>
    #{list items:users, as:'element'}
		<tr>
			<td>${element.fullname}</td>
			<td><code>${element.login}</code></td>
			<td><a href="@{ACL.editgroup(element.group.name)}" class="">${element.group.name}</a></td>
			<td><a href="@{ACL.editrole(element.group.role.name)}" class="">${element.group.role.name}</a></td>
			<td><small>${element.sourcename}</small></td>
			<td>
				<a href="@{ACL.edituser(element.login)}" class="btn btn-mini btn-info"><i class="icon-pencil icon-white"></i></a>
				<a href="@{ACL.deleteuser(element.login)}" class="btn btn-mini btn-danger btn-toogle-desactivate disabled"><i class="icon-trash icon-white"></i></a>
			</td>
		</tr>
    #{/list}
    </tbody>
</table>


<script type="text/javascript" charset="UTF-8">
<!--
$(document).ready(function() {
   	try {
		$("#btnAdmin").addClass("active");
		$("#subMenuBtnUsers").addClass("active");
		
		$('#btn-toogle-desactivate').click(function (){
			$(".btn-toogle-desactivate").toggleClass("disabled");
		});
	
		$('.btn-toogle-desactivate').click(function (){
			return $(this).hasClass("disabled") == false;
		});
		
		$('.elementlist').dataTable({
			"bPaginate": false,
		    "bLengthChange": false,
		    "bSort": true,
		    "bInfo": false,
		    "bAutoWidth": false,
		    "bFilter": true,
		    "aoColumnDefs": [
				{"bVisible": true, "bSearchable": false, "bSortable": false, "aTargets": [5]},
			]
		});

		$('#sitesearch').bind('keyup.DT', function(e) {
			var val = this.value==="" ? "" : this.value;
			$('.dataTables_filter input').val(val);
			$('.dataTables_filter input').trigger("keyup.DT");
		});
		
	} catch(err) {
		console.log(err);
	}
});
-->
</script>
