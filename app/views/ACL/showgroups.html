*{
 * This file is part of MyDMAM.
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * Copyright (C) hdsdi3g for hd3g.tv 2014
 * 
}*
#{extends 'ACL/grid.html' /}

<p>
	<a href="@{ACL.addgroup()}" class="btn btn-success"><i class="icon-plus icon-white"></i> &{'acl.add'}</a>
</p>

<table class="table table-striped table-hover table-condensed elementlist">
    <thead>
        <tr>
            <th>&{'acl.name'}</th>
            <th>&{'acl.role'}</th>
            <th>&{'acl.users'}</th>
			#{secure.check 'editacls'}
	            <th>
	            	<input type="checkbox" id="btn-toogle-desactivate" ckecked="checked" style="margin-left:39px;" />
	            </th>
			#{/secure.check}
		</tr>
    </thead>
    <tbody>
    #{list items:groups, as:'element'}
		<tr>
			<td>${element.name}</td>
			<td>${element.role.name}</td>
			<td>
                #{if element.users}
				<div class="dropdown">
					<button id="dusr-${element.name.makeUniqId()}" class="dropdown-toggle btn btn-mini" role="button" data-toggle="dropdown">
						${element.users.size()}
						<b class="caret"></b>
					</button>
					<ul class="dropdown-menu" role="menu" aria-labelledby="dusr-${element.name.makeUniqId()}">
						#{list items:element.users, as:'user'}
							<li>
								<a href="@{ACL.edituser(user.login)}">
									${user.fullname} (${user.login})
								</a>
							</li>
						#{/list}
					</ul>
				</div>
                #{/if}
			</td>
			<td>
				<a href="@{ACL.editgroup(element.name)}" class="btn btn-mini btn-info"><i class="icon-pencil icon-white"></i></a>
				<a href="@{ACL.deletegroup(element.name)}" class="btn btn-mini btn-danger btn-toogle-desactivate disabled"><i class="icon-trash icon-white"></i></a>
			</td>
		</tr>
    #{/list}
    </tbody>
</table>

<script type="text/javascript" charset="UTF-8">
<!--
$(document).ready(function() {
   	try {
		$("#btnAdmin").addClass("active");
		$("#subMenuBtnGroup").addClass("active");

		$('#btn-toogle-desactivate').click(function (){
			$(".btn-toogle-desactivate").toggleClass("disabled");
		});
	
		$('.btn-toogle-desactivate').click(function (){
			return $(this).hasClass("disabled") == false;
		});
		
		$('.elementlist').dataTable({
			"bPaginate": false,
		    "bLengthChange": false,
		    "bSort": true,
		    "bInfo": false,
		    "bAutoWidth": false,
		    "bFilter": true,
		    "aoColumnDefs": [
				{"bVisible": true, "bSearchable": false, "bSortable": false, "aTargets": [2,3]},
			]
		});

		$('#sitesearch').bind('keyup.DT', function(e) {
			var val = this.value==="" ? "" : this.value;
			$('.dataTables_filter input').val(val);
			$('.dataTables_filter input').trigger("keyup.DT");
		});
		
	} catch(err) {
		console.log(err);
	}
});
-->
</script>
