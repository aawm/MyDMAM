*{
 * This file is part of MyDMAM.
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * Copyright (C) hdsdi3g for hd3g.tv 2015
 * 
}*
#{extends 'ACL/grid.html' /}

<table class="table table-striped table-hover table-condensed elementlist">
    <thead>
        <tr>
            <th>&{'acl.blacklistip.address'}</th>
            <th>&{'acl.blacklistip.first_attempt'}</th>
            <th>&{'acl.blacklistip.last_attempt'}</th>
            <th>&{'acl.blacklistip.last_attempt_username'}</th>
            <th>&{'acl.blacklistip.attempt'}</th>
		</tr>
    </thead>
    <tbody>
    #{list items:blacklistips, as:'element'}
		<tr>
			<td>
				${element.address}
				<a href="@{ACL.deleteblacklistip(element.address)}" class="btn btn-mini btn-danger"><i class="icon-ok icon-white"></i></a>
			</td>
			<td>${element.first_attempt}</td>
			<td>${element.last_attempt}</td>
			<td>
				<a href="@{ACL.edituser(element.last_attempt_username)}">${element.last_attempt_username}</a>
			</td>
			<td>${element.attempt}/${max_attempt_for_blocking_addr}</td>
		</tr>
    #{/list}
    </tbody>
</table>

<div class="row">
<div class="span5">
		<table class="table table-condensed table-bordered">
		<tr>
			<th>&{'acl.blacklistip.max_attempt_for_blocking_addr'}</th>
			<td>${max_attempt_for_blocking_addr}</td>
		</tr>
		<tr>
			<th>&{'acl.blacklistip.grace_attempt_count'}</th>
			<td>${grace_attempt_count}</td>
		</tr>
		<tr>
			<th>&{'acl.blacklistip.grace_period_factor_time'}</th>
			<td>${grace_period_factor_time}</td>
		</tr>
	</table>
</div>
</div>

<script type="text/javascript" charset="UTF-8">
<!--
$(document).ready(function() {
   	try {
		$("#btnAdmin").addClass("active");
		$("#subMenuBtnBlacklistips").addClass("active");
		
		$('.elementlist').dataTable({
			"bPaginate": false,
		    "bLengthChange": false,
		    "bSort": true,
		    "bInfo": false,
		    "bAutoWidth": false,
		    "bFilter": true,
		    /*"aoColumnDefs": [
				{"bVisible": true, "bSearchable": false, "bSortable": false, "aTargets": [6]},
			]*/
		});

		$('#sitesearch').bind('keyup.DT', function(e) {
			var val = this.value==="" ? "" : this.value;
			$('.dataTables_filter input').val(val);
			$('.dataTables_filter input').trigger("keyup.DT");
		});
		
	} catch(err) {
		console.log(err);
	}
});
-->
</script>
